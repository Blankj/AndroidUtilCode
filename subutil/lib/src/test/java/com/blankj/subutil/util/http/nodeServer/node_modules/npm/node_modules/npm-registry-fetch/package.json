{
  "_from": "npm-registry-fetch@latest",
  "_id": "npm-registry-fetch@3.9.0",
  "_inBundle": false,
  "_integrity": "sha512-srwmt8YhNajAoSAaDWndmZgx89lJwIZ1GWxOuckH4Coek4uHv5S+o/l9FLQe/awA+JwTnj4FJHldxhlXdZEBmw==",
  "_location": "/npm/npm-registry-fetch",
  "_phantomChildren": {},
  "_requested": {
    "type": "tag",
    "registry": true,
    "raw": "npm-registry-fetch@latest",
    "name": "npm-registry-fetch",
    "escapedName": "npm-registry-fetch",
    "rawSpec": "latest",
    "saveSpec": null,
    "fetchSpec": "latest"
  },
  "_requiredBy": [
    "/npm",
    "/npm/libnpm",
    "/npm/libnpmaccess",
    "/npm/libnpmhook",
    "/npm/libnpmorg",
    "/npm/libnpmpublish",
    "/npm/libnpmsearch",
    "/npm/libnpmteam",
    "/npm/npm-profile",
    "/npm/pacote"
  ],
  "_resolved": "https://registry.npmjs.org/npm-registry-fetch/-/npm-registry-fetch-3.9.0.tgz",
  "_shasum": "44d841780e2833f06accb34488f8c7450d1a6856",
  "_shrinkwrap": null,
  "_spec": "npm-registry-fetch@latest",
  "_where": "/Users/zkat/Documents/code/work/npm",
  "author": {
    "name": "Kat March√°n",
    "email": "kzm@sykosomatic.org"
  },
  "bugs": {
    "url": "https://github.com/npm/registry-fetch/issues"
  },
  "bundleDependencies": false,
  "config": {
    "nyc": {
      "exclude": [
        "node_modules/**",
        "test/**"
      ]
    }
  },
  "dependencies": {
    "JSONStream": "^1.3.4",
    "bluebird": "^3.5.1",
    "figgy-pudding": "^3.4.1",
    "lru-cache": "^4.1.3",
    "make-fetch-happen": "^4.0.1",
    "npm-package-arg": "^6.1.0"
  },
  "deprecated": false,
  "description": "Fetch-based http client for use with npm registry APIs",
  "devDependencies": {
    "cacache": "^11.0.2",
    "get-stream": "^4.0.0",
    "mkdirp": "^0.5.1",
    "nock": "^9.4.3",
    "npmlog": "^4.1.2",
    "rimraf": "^2.6.2",
    "ssri": "^6.0.0",
    "standard": "^11.0.1",
    "standard-version": "^4.4.0",
    "tap": "^12.0.1",
    "weallbehave": "^1.2.0",
    "weallcontribute": "^1.0.8"
  },
  "files": [
    "*.js",
    "lib"
  ],
  "homepage": "https://github.com/npm/registry-fetch#readme",
  "keywords": [
    "npm",
    "registry",
    "fetch"
  ],
  "license": "ISC",
  "main": "index.js",
  "name": "npm-registry-fetch",
  "optionalDependencies": {},
  "readme": "# npm-registry-fetch [![npm version](https://img.shields.io/npm/v/npm-registry-fetch.svg)](https://npm.im/npm-registry-fetch) [![license](https://img.shields.io/npm/l/npm-registry-fetch.svg)](https://npm.im/npm-registry-fetch) [![Travis](https://img.shields.io/travis/npm/npm-registry-fetch/latest.svg)](https://travis-ci.org/npm/npm-registry-fetch) [![AppVeyor](https://img.shields.io/appveyor/ci/zkat/npm-registry-fetch/latest.svg)](https://ci.appveyor.com/project/npm/npm-registry-fetch) [![Coverage Status](https://coveralls.io/repos/github/npm/npm-registry-fetch/badge.svg?branch=latest)](https://coveralls.io/github/npm/npm-registry-fetch?branch=latest)\n\n[`npm-registry-fetch`](https://github.com/npm/npm-registry-fetch) is a Node.js\nlibrary that implements a `fetch`-like API for accessing npm registry APIs\nconsistently. It's able to consume npm-style configuration values and has all\nthe necessary logic for picking registries, handling scopes, and dealing with\nauthentication details built-in.\n\nThis package is meant to replace the older\n[`npm-registry-client`](https://npm.im/npm-registry-client).\n\n## Example\n\n```javascript\nconst npmFetch = require('npm-registry-fetch')\n\nconsole.log(\n  await npmFetch.json('/-/ping')\n)\n```\n\n## Table of Contents\n\n* [Installing](#install)\n* [Example](#example)\n* [Contributing](#contributing)\n* [API](#api)\n  * [`fetch`](#fetch)\n  * [`fetch.json`](#fetch-json)\n  * [`fetch` options](#fetch-opts)\n\n### Install\n\n`$ npm install npm-registry-fetch`\n\n### Contributing\n\nThe npm team enthusiastically welcomes contributions and project participation!\nThere's a bunch of things you can do if you want to contribute! The [Contributor\nGuide](CONTRIBUTING.md) has all the information you need for everything from\nreporting bugs to contributing entire new features. Please don't hesitate to\njump in if you'd like to, or even ask us questions if something isn't clear.\n\nAll participants and maintainers in this project are expected to follow [Code of\nConduct](CODE_OF_CONDUCT.md), and just generally be excellent to each other.\n\nPlease refer to the [Changelog](CHANGELOG.md) for project history details, too.\n\nHappy hacking!\n\n### API\n\n#### <a name=\"fetch\"></a> `> fetch(url, [opts]) -> Promise<Response>`\n\nPerforms a request to a given URL.\n\nThe URL can be either a full URL, or a path to one. The appropriate registry\nwill be automatically picked if only a URL path is given.\n\nFor available options, please see the section on [`fetch` options](#fetch-opts).\n\n##### Example\n\n```javascript\nconst res = await fetch('/-/ping')\nconsole.log(res.headers)\nres.on('data', d => console.log(d.toString('utf8')))\n```\n\n#### <a name=\"fetch-json\"></a> `> fetch.json(url, [opts]) -> Promise<ResponseJSON>`\n\nPerforms a request to a given registry URL, parses the body of the response as\nJSON, and returns it as its final value. This is a utility shorthand for\n`fetch(url).then(res => res.json())`.\n\nFor available options, please see the section on [`fetch` options](#fetch-opts).\n\n##### Example\n\n```javascript\nconst res = await fetch.json('/-/ping')\nconsole.log(res) // Body parsed as JSON\n```\n\n#### <a name=\"fetch-json-stream\"></a> `> fetch.json.stream(url, jsonPath, [opts]) -> Stream`\n\nPerforms a request to a given registry URL and parses the body of the response\nas JSON, with each entry being emitted through the stream.\n\nThe `jsonPath` argument is a [`JSONStream.parse()`\npath](https://github.com/dominictarr/JSONStream#jsonstreamparsepath), and the\nreturned stream (unlike default `JSONStream`s), has a valid\n`Symbol.asyncIterator` implementation.\n\nFor available options, please see the section on [`fetch` options](#fetch-opts).\n\n##### Example\n\n```javascript\nconsole.log('https://npm.im/~zkat has access to the following packages:')\nfor await (let {key, value} of fetch.json.stream('/-/user/zkat/package', '$*')) {\n  console.log(`https://npm.im/${key} (perms: ${value})`)\n}\n```\n\n#### <a name=\"fetch-opts\"></a> `fetch` Options\n\nFetch options are optional, and can be passed in as either a Map-like object\n(one with a `.get()` method), a plain javascript object, or a\n[`figgy-pudding`](https://npm.im/figgy-pudding) instance.\n\n##### <a name=\"opts-agent\"></a> `opts.agent`\n\n* Type: http.Agent\n* Default: an appropriate agent based on URL protocol and proxy settings\n\nAn [`Agent`](https://nodejs.org/api/http.html#http_class_http_agent) instance to\nbe shared across requests. This allows multiple concurrent `fetch` requests to\nhappen on the same socket.\n\nYou do _not_ need to provide this option unless you want something particularly\nspecialized, since proxy configurations and http/https agents are already\nautomatically managed internally when this option is not passed through.\n\n##### <a name=\"opts-body\"></a> `opts.body`\n\n* Type: Buffer | Stream | Object\n* Default: null\n\nRequest body to send through the outgoing request. Buffers and Streams will be\npassed through as-is, with a default `content-type` of\n`application/octet-stream`. Plain JavaScript objects will be `JSON.stringify`ed\nand the `content-type` will default to `application/json`.\n\nUse [`opts.headers`](#opts-headers) to set the content-type to something else.\n\n##### <a name=\"opts-ca\"></a> `opts.ca`\n\n* Type: String, Array, or null\n* Default: null\n\nThe Certificate Authority signing certificate that is trusted for SSL\nconnections to the registry. Values should be in PEM format (Windows calls it\n\"Base-64 encoded X.509 (.CER)\") with newlines replaced by the string `'\\n'`. For\nexample:\n\n```\n{\n  ca: '-----BEGIN CERTIFICATE-----\\nXXXX\\nXXXX\\n-----END CERTIFICATE-----'\n}\n```\n\nSet to `null` to only allow \"known\" registrars, or to a specific CA cert\nto trust only that specific signing authority.\n\nMultiple CAs can be trusted by specifying an array of certificates instead of a\nsingle string.\n\nSee also [`opts.strict-ssl`](#opts-strict-ssl), [`opts.ca`](#opts-ca) and\n[`opts.key`](#opts-key)\n\n##### <a name=\"opts-cache\"></a> `opts.cache`\n\n* Type: path\n* Default: null\n\nThe location of the http cache directory. If provided, certain cachable requests\nwill be cached according to [IETF RFC 7234](https://tools.ietf.org/html/rfc7234)\nrules. This will speed up future requests, as well as make the cached data\navailable offline if necessary/requested.\n\nSee also [`offline`](#opts-offline), [`prefer-offline`](#opts-prefer-offline),\nand [`prefer-online`](#opts-prefer-online).\n\n##### <a name=\"opts-cert\"></a> `opts.cert`\n\n* Type: String\n* Default: null\n\nA client certificate to pass when accessing the registry.  Values should be in\nPEM format (Windows calls it \"Base-64 encoded X.509 (.CER)\") with newlines\nreplaced by the string `'\\n'`. For example:\n\n```\n{\n  cert: '-----BEGIN CERTIFICATE-----\\nXXXX\\nXXXX\\n-----END CERTIFICATE-----'\n}\n```\n\nIt is _not_ the path to a certificate file (and there is no \"certfile\" option).\n\nSee also: [`opts.ca`](#opts-ca) and [`opts.key`](#opts-key)\n\n##### <a name=\"opts-fetch-retries\"></a> `opts.fetch-retries`\n\n* Type: Number\n* Default: 2\n\nThe \"retries\" config for [`retry`](https://npm.im/retry) to use when fetching\npackages from the registry.\n\nSee also [`opts.retry`](#opts-retry) to provide all retry options as a single\nobject.\n\n##### <a name=\"opts-fetch-retry-factor\"></a> `opts.fetch-retry-factor`\n\n* Type: Number\n* Default: 10\n\nThe \"factor\" config for [`retry`](https://npm.im/retry) to use when fetching\npackages.\n\nSee also [`opts.retry`](#opts-retry) to provide all retry options as a single\nobject.\n\n##### <a name=\"opts-fetch-retry-mintimeout\"></a> `opts.fetch-retry-mintimeout`\n\n* Type: Number\n* Default: 10000 (10 seconds)\n\nThe \"minTimeout\" config for [`retry`](https://npm.im/retry) to use when fetching\npackages.\n\nSee also [`opts.retry`](#opts-retry) to provide all retry options as a single\nobject.\n\n##### <a name=\"opts-fetch-retry-maxtimeout\"></a> `opts.fetch-retry-maxtimeout`\n\n* Type: Number\n* Default: 60000 (1 minute)\n\nThe \"maxTimeout\" config for [`retry`](https://npm.im/retry) to use when fetching\npackages.\n\nSee also [`opts.retry`](#opts-retry) to provide all retry options as a single\nobject.\n\n##### <a name=\"opts-force-auth\"></a> `opts.force-auth`\n\n* Alias: `opts.forceAuth`\n* Type: Object\n* Default: null\n\nIf present, other auth-related values in `opts` will be completely ignored,\nincluding `alwaysAuth`, `email`, and `otp`, when calculating auth for a request,\nand the auth details in `opts.forceAuth` will be used instead.\n\n##### <a name=\"opts-gzip\"></a> `opts.gzip`\n\n* Type: Boolean\n* Default: false\n\nIf true, `npm-registry-fetch` will set the `Content-Encoding` header to `gzip`\nand use `zlib.gzip()` or `zlib.createGzip()` to gzip-encode\n[`opts.body`](#opts-body).\n\n##### <a name=\"opts-headers\"></a> `opts.headers`\n\n* Type: Object\n* Default: null\n\nAdditional headers for the outgoing request. This option can also be used to\noverride headers automatically generated by `npm-registry-fetch`, such as\n`Content-Type`.\n\n##### <a name=\"opts-ignore-body\"></a> `opts.ignore-body`\n\n* Alias: `opts.ignoreBody`\n* Type: Boolean\n* Default: false\n\nIf true, the **response body** will be thrown away and `res.body` set to `null`.\nThis will prevent dangling response sockets for requests where you don't usually\ncare what the response body is.\n\n##### <a name=\"opts-integrity\"></a> `opts.integrity`\n\n* Type: String | [SRI object](https://npm.im/ssri)\n* Default: null\n\nIf provided, the response body's will be verified against this integrity string,\nusing [`ssri`](https://npm.im/ssri). If verification succeeds, the response will\ncomplete as normal. If verification fails, the response body will error with an\n`EINTEGRITY` error.\n\nBody integrity is only verified if the body is actually consumed to completion --\nthat is, if you use `res.json()`/`res.buffer()`, or if you consume the default\n`res` stream data to its end.\n\nCached data will have its integrity automatically verified using the\npreviously-generated integrity hash for the saved request information, so\n`EINTEGRITY` errors can happen if [`opts.cache`](#opts-cache) is used, even if\n`opts.integrity` is not passed in.\n\n##### <a name='opts-is-from-ci'></a> `opts.is-from-ci`\n\n* Alias: `opts.isFromCI`\n* Type: Boolean\n* Default: Based on environment variables\n\nThis is used to populate the `npm-in-ci` request header sent to the registry.\n\n##### <a name=\"opts-key\"></a> `opts.key`\n\n* Type: String\n* Default: null\n\nA client key to pass when accessing the registry.  Values should be in PEM\nformat with newlines replaced by the string `'\\n'`. For example:\n\n```\n{\n  key: '-----BEGIN PRIVATE KEY-----\\nXXXX\\nXXXX\\n-----END PRIVATE KEY-----'\n}\n```\n\nIt is _not_ the path to a key file (and there is no \"keyfile\" option).\n\nSee also: [`opts.ca`](#opts-ca) and [`opts.cert`](#opts-cert)\n\n##### <a name=\"opts-local-address\"></a> `opts.local-address`\n\n* Type: IP Address String\n* Default: null\n\nThe IP address of the local interface to use when making connections\nto the registry.\n\nSee also [`opts.proxy`](#opts-proxy)\n\n##### <a name=\"opts-log\"></a> `opts.log`\n\n* Type: [`npmlog`](https://npm.im/npmlog)-like\n* Default: null\n\nLogger object to use for logging operation details. Must have the same methods\nas `npmlog`.\n\n##### <a name=\"opts-map-json\"></a> `opts.map-json`\n\n* Alias: `mapJson`, `mapJSON`\n* Type: Function\n* Default: undefined\n\nWhen using `fetch.json.stream()` (NOT `fetch.json()`), this will be passed down\nto [`JSONStream`](https://npm.im/JSONStream) as the second argument to\n`JSONStream.parse`, and can be used to transform stream data before output.\n\n##### <a name=\"opts-maxsockets\"></a> `opts.maxsockets`\n\n* Alias: `opts.max-sockets`\n* Type: Integer\n* Default: 12\n\nMaximum number of sockets to keep open during requests. Has no effect if\n[`opts.agent`](#opts-agent) is used.\n\n##### <a name=\"opts-method\"></a> `opts.method`\n\n* Type: String\n* Default: 'GET'\n\nHTTP method to use for the outgoing request. Case-insensitive.\n\n##### <a name=\"opts-noproxy\"></a> `opts.noproxy`\n\n* Type: Boolean\n* Default: process.env.NOPROXY\n\nIf true, proxying will be disabled even if [`opts.proxy`](#opts-proxy) is used.\n\n##### <a name=\"opts-npm-session\"></a> `opts.npm-session`\n\n* Alias: `opts.npmSession`\n* Type: String\n* Default: null\n\nIf provided, will be sent in the `npm-session` header. This header is used by\nthe npm registry to identify individual user sessions (usually individual\ninvocations of the CLI).\n\n##### <a name=\"opts-offline\"></a> `opts.offline`\n\n* Type: Boolean\n* Default: false\n\nForce offline mode: no network requests will be done during install. To allow\n`npm-registry-fetch` to fill in missing cache data, see\n[`opts.prefer-offline`](#opts-prefer-offline).\n\nThis option is only really useful if you're also using\n[`opts.cache`](#opts-cache).\n\n##### <a name=\"opts-otp\"></a> `opts.otp`\n\n* Type: Number | String\n* Default: null\n\nThis is a one-time password from a two-factor authenticator. It is required for\ncertain registry interactions when two-factor auth is enabled for a user\naccount.\n\n##### <a name=\"opts-password\"></a> `opts.password`\n\n* Alias: _password\n* Type: String\n* Default: null\n\nPassword used for basic authentication. For the more modern authentication\nmethod, please use the (more secure) [`opts.token`](#opts-token)\n\nCan optionally be scoped to a registry by using a \"nerf dart\" for that registry.\nThat is:\n\n```\n{\n  '//registry.npmjs.org/:password': 't0k3nH34r'\n}\n```\n\nSee also [`opts.username`](#opts-username)\n\n##### <a name=\"opts-prefer-offline\"></a> `opts.prefer-offline`\n\n* Type: Boolean\n* Default: false\n\nIf true, staleness checks for cached data will be bypassed, but missing data\nwill be requested from the server. To force full offline mode, use\n[`opts.offline`](#opts-offline).\n\nThis option is generally only useful if you're also using\n[`opts.cache`](#opts-cache).\n\n##### <a name=\"opts-prefer-online\"></a> `opts.prefer-online`\n\n* Type: Boolean\n* Default: false\n\nIf true, staleness checks for cached data will be forced, making the CLI look\nfor updates immediately even for fresh package data.\n\nThis option is generally only useful if you're also using\n[`opts.cache`](#opts-cache).\n\n\n##### <a name=\"opts-project-scope\"></a> `opts.project-scope`\n\n* Alias: `opts.projectScope`\n* Type: String\n* Default: null\n\nIf provided, will be sent in the `npm-scope` header. This header is used by the\nnpm registry to identify the toplevel package scope that a particular project\ninstallation is using.\n\n##### <a name=\"opts-proxy\"></a> `opts.proxy`\n\n* Type: url\n* Default: null\n\nA proxy to use for outgoing http requests. If not passed in, the `HTTP(S)_PROXY`\nenvironment variable will be used.\n\n##### <a name=\"opts-query\"></a> `opts.query`\n\n* Type: String | Object\n* Default: null\n\nIf provided, the request URI will have a query string appended to it using this\nquery. If `opts.query` is an object, it will be converted to a query string\nusing\n[`querystring.stringify()`](https://nodejs.org/api/querystring.html#querystring_querystring_stringify_obj_sep_eq_options).\n\nIf the request URI already has a query string, it will be merged with\n`opts.query`, preferring `opts.query` values.\n\n##### <a name=\"opts-refer\"></a> `opts.refer`\n\n* Alias: `opts.referer`\n* Type: String\n* Default: null\n\nValue to use for the `Referer` header. The npm CLI itself uses this to serialize\nthe npm command line using the given request.\n\n##### <a name=\"opts-registry\"></a> `opts.registry`\n\n* Type: URL\n* Default: `'https://registry.npmjs.org'`\n\nRegistry configuration for a request. If a request URL only includes the URL\npath, this registry setting will be prepended. This configuration is also used\nto determine authentication details, so even if the request URL references a\ncompletely different host, `opts.registry` will be used to find the auth details\nfor that request.\n\nSee also [`opts.scope`](#opts-scope), [`opts.spec`](#opts-spec), and\n[`opts.<scope>:registry`](#opts-scope-registry) which can all affect the actual\nregistry URL used by the outgoing request.\n\n##### <a name=\"opts-retry\"></a> `opts.retry`\n\n* Type: Object\n* Default: null\n\nSingle-object configuration for request retry settings. If passed in, will\noverride individually-passed `fetch-retry-*` settings.\n\n##### <a name=\"opts-scope\"></a> `opts.scope`\n\n* Type: String\n* Default: null\n\nAssociate an operation with a scope for a scoped registry. This option can force\nlookup of scope-specific registries and authentication.\n\nSee also [`opts.<scope>:registry`](#opts-scope-registry) and\n[`opts.spec`](#opts-spec) for interactions with this option.\n\n##### <a name=\"opts-scope-registry\"></a> `opts.<scope>:registry`\n\n* Type: String\n* Default: null\n\nThis option type can be used to configure the registry used for requests\ninvolving a particular scope. For example, `opts['@myscope:registry'] =\n'https://scope-specific.registry/'` will make it so requests go out to this\nregistry instead of [`opts.registry`](#opts-registry) when\n[`opts.scope`](#opts-scope) is used, or when [`opts.spec`](#opts-spec) is a\nscoped package spec.\n\nThe `@` before the scope name is optional, but recommended.\n\n##### <a name=\"opts-spec\"></a> `opts.spec`\n\n* Type: String | [`npm-registry-arg`](https://npm.im/npm-registry-arg) object.\n* Default: null\n\nIf provided, can be used to automatically configure [`opts.scope`](#opts-scope)\nbased on a specific package name. Non-registry package specs will throw an\nerror.\n\n##### <a name=\"opts-strict-ssl\"></a> `opts.strict-ssl`\n\n* Type: Boolean\n* Default: true\n\nWhether or not to do SSL key validation when making requests to the\nregistry via https.\n\nSee also [`opts.ca`](#opts-ca).\n\n##### <a name=\"opts-timeout\"></a> `opts.timeout`\n\n* Type: Milliseconds\n* Default: 30000 (30 seconds)\n\nTime before a hanging request times out.\n\n##### <a name=\"opts-token\"></a> `opts.token`\n\n* Alias: `opts._authToken`\n* Type: String\n* Default: null\n\nAuthentication token string.\n\nCan be scoped to a registry by using a \"nerf dart\" for that registry. That is:\n\n```\n{\n  '//registry.npmjs.org/:token': 't0k3nH34r'\n}\n```\n\n##### <a name=\"opts-user-agent\"></a> `opts.user-agent`\n\n* Type: String\n* Default: `'npm-registry-fetch@<version>/node@<node-version>+<arch> (<platform>)'`\n\nUser agent string to send in the `User-Agent` header.\n\n##### <a name=\"opts-username\"></a> `opts.username`\n\n* Type: String\n* Default: null\n\nUsername used for basic authentication. For the more modern authentication\nmethod, please use the (more secure) [`opts.token`](#opts-token)\n\nCan optionally be scoped to a registry by using a \"nerf dart\" for that registry.\nThat is:\n\n```\n{\n  '//registry.npmjs.org/:username': 't0k3nH34r'\n}\n```\n\nSee also [`opts.password`](#opts-password)\n\n##### <a name=\"opts-auth\"></a> `opts._auth`\n\n* Type: String\n* Default: null\n\n** DEPRECATED ** This is a legacy authentication token supported only for\n*compatibility. Please use [`opts.token`](#opts-token) instead.\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/npm/registry-fetch.git"
  },
  "scripts": {
    "postrelease": "npm publish && git push --follow-tags",
    "prerelease": "npm t",
    "pretest": "standard",
    "release": "standard-version -s",
    "test": "tap -J --coverage test/*.js",
    "update-coc": "weallbehave -o . && git add CODE_OF_CONDUCT.md && git commit -m 'docs(coc): updated CODE_OF_CONDUCT.md'",
    "update-contrib": "weallcontribute -o . && git add CONTRIBUTING.md && git commit -m 'docs(contributing): updated CONTRIBUTING.md'"
  },
  "version": "3.9.0"
}
